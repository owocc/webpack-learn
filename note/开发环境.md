## 开发环境

通过不同的 `mode` 来进行不同的配置,记得没错的话,后面应该是要分文件来搞,不同的环境变量不同的配置

## 使用 source map

source map 的作用就是在开发时,将在调试时报的错误或者原始代码和 build 之后的代码对应上,用于方便调试
配置好这个后,代码出现了错误后就会提示出原始文件出错的地方,而不是 bundle 文件的地方

> 使用 source map 可以将编译后代码映射回原始代码，方便在开发过程中进行调试和排错，而不是在压缩后的代码中定位错误的位置，从而提高调试效率。

> 官方原话
> 当 webpack 打包源代码时，可能会很难追踪到 error(错误) 和 warning(警告) 在源代码中的原始位置。例如，如果将三个源文件（a.js, b.js 和 c.js）打包到一个 bundle（bundle.js）中，而其中一个源文件包含一个错误，那么堆栈跟踪就会直接指向到 bundle.js。你可能需要准确地知道错误来自于哪个源文件，所以这种提示这通常不会提供太多帮助。
> 为了更容易地追踪 error 和 warning，JavaScript 提供了 source maps 功能，可以将编译后的代码映射回原始源代码。如果一个错误来自于 b.js，source map 就会明确的告诉你。

## 自动编译代码(解决每次运行都需要手动 build)

webpack 提供几种可选的方式,能在代码改变后来自动编译代码~

1. webpack's Watch Mode
2. webpack-dev-server
3. webpack-dev-middleware

官方推荐是 webpack-dev-server ,因为大多数场景下都是用这个,不过也是跟着官方的步骤,每个都尝试一遍

### 使用 watch mode(观察模式)

> 可以指示 webpack "watch" 依赖图中所有文件的更改。如果其中一个文件被更新，代码将被重新编译，所以你不必再去手动运行整个构建。

watch 的使用也很简单,就是直接在 package.json 中,新建一个自定义指令,然后带上 `--watch` 选项

```json
"script":{
    "watch" : "webpack --watch"
}
```

**这种模式会动态的监听入口文件依赖的 js 然后自动编代码,不过页面不会自动刷新,需要手动刷新一下页面才行**

### 使用 webpack-dev-server `推荐`

`webpack-dev-server` 提供了一个基本的 web server,并且具有 live reloading(实时重新加载) 功能 (就是能自动刷新页面)
要使用的话,需要安装一下 `webpack-dev-server`
然后修改一下配置文件,告诉它从哪个位置查找文件

然后在 webpack 中配置一下 devServer(直接看配置文件)

接着在 package.json 中添加一个自定义命令来启动

## webpack-dev-middleware

> webpack-dev-middleware 是一个封装起,它可以把 webpack 处理过的文件发送到一个 server,webpack-dev-server 在内部使用了它，然而它也可以作为一个单独的 package 来使用，以便根据需求进行更多自定义设置。下面是一个 webpack-dev-middleware 配合 express server 的示例

这就类似 tomcat 和 Springboot 的关系吧, tomcat 可以独立拿出来用,也可以使用 Springboot 内置好的直接来开启服务使用

要使用 webpack-dev-middleware 的话,需要安装一下 `express webpack-dev-middleware` 其实这里 express 更像 tomcat 提供的功能吧~

这里需要去 webpack.config.js 中设置一下 `output` 的 `publicPath` 属性,指定一下 webpack 编译后的文件路径

> chatGPT 提供的解答
>
> publicPath 是 webpack 配置中一个非常重要的选项，它会影响到 webpack 编译后的文件路径。
>
> 在 webpack 打包之后，所有的模块和资源都会被打包到一个或多个 bundle 中，而这些 bundle 的引用路径就由 publicPath 参数控制，主要用于指定 webpack 输出 bundle 对应的公共 URL 地址，它会影响到 webpack 打包后生成的所有资源的引用路径。
>
> 例如，当 publicPath 设置为"/"时，打包后的文件会被放置在网站的根目录下，这意味着，如果你的网站地址是 www.example.com，那么 webpack 会生成的文件路径就为 www.example.com/bundle.js 。如果 publicPath 设置成 /assets/，那么输出的文件路径就会变成 www.example.com/assets/bundle.js，意味着资源将会被放置在该网站的 assets 目录下。
>
> 可以看出，publicPath 提供了 webpack 输出文件的基准 URL，使得我们可以通过 URL 加载 webpack 编译后的产物。因此，在设置 publicPath 时候，一定要根据实际的需求来进行配置，通常情况下配置成网站的根目录或者资源所在的目录即可。

这里主要的意思就是控制输出的文件的访问路径,如果设置为 `/` 那就是直接在 `www.example.com/bundle.js` 这个形式获取,如果设置为 `/assets/` 那么那个文件就需要在`域名:端口号`/`ip:端口号` 后面加上 `/assets` 才能访问这个文件

要启动这个模式的话,还得自己手动写一个 server.js 来搭配 express 启动服务(啊这,简直就是Spring),这个文件的话,就直接复制官方的了,
直接可以看 `server.js`

然后添加一个脚本来运行这个服务(这里脚本还是直接使用 node 来运行)
